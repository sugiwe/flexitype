# 2025-12-04 の日報（Day 4）

## 本日の目標

- Viewファーストな開発方針の確立
- Phase 2開始：タイピング練習画面のView作成
- Cornixキーボード配列の表示実装

## 実施内容

### Viewファーストな開発方針の策定

- CLAUDE.mdに「Viewファーストな開発」セクションを追加
  - 基本方針：まずレイアウトを含むビューを先に作成
  - メリット：モチベーション向上、完成イメージの明確化
  - 実装手順：ルーティング → View → モデル・ロジックの順
- Phase 2のスケジュールをViewファーストなアプローチに合わせて再構成
  - Day 4-6: View作成（UI優先）
  - Day 7-8: ロジック実装
  - Day 9-10: キーマップ機能
  - Day 11: 統合テスト

### タイピング練習画面のView実装

- Practiceコントローラとルーティングを作成（`/practice`）
- タイピング練習画面の基本レイアウトを実装
  - **単語表示エリア**：問題番号と単語（色分け表示のサンプル）
    - 緑：入力済み（正解）
    - 青：現在入力中
    - 灰色：未入力
  - **入力フォーム**：大きめのテキスト入力欄とBackSpace案内
  - **レイヤー切り替えUI**：Layer 0-5 のボタン
  - **ヒント表示切り替え**：チェックボックス
  - **統計情報表示**：正答率、WPM、ミス数（ダミーデータ）

### Cornixキーボード配列の表示実装

- **4行×6列の左右分割レイアウト**
  - CSS Gridで実装
  - 正方形のキー（w-14 h-14 = 3.5rem × 3.5rem）
  - 左右のキーボードの間隔を調整（gap-16 = 4rem）
- **実際のCornix配列を反映**
  - 左手側：Tab/Q/W/E/R/T、Caps/A/S/D/F/G、Shift/Z/X/C/V/B、Ctrl/Alt/Cmd/Lyr1/Lower/Spc
  - 右手側：Y/U/I/O/P/BS、H/J/K/L/-/Ent、N/M/,/./Up//、Spc/Raise/Lyr2/Left/Down/Right
- **レイヤーキーの視覚的ハイライト**
  - Lyr1, Lower, Raise, Lyr2を青色（bg-blue-300）で強調
  - 最下段のキーは文字サイズを小さく（text-xs）

### 親指キー配置の試行錯誤

- 実際のCornixでは親指キーが中央寄りに配置されている
- CSS GridとFlexboxを組み合わせて中央寄せ配置を試みる
- 複雑化したため、最終的にシンプルな4×6のGrid配置に統一
- カラムスタッガード対応も含めて今後の課題として保留

## 学んだこと・気づき

### Viewファーストな開発の効果

- ブラウザで完成形に近いUIを見ながら開発できるため、モチベーションが大幅に向上
- 完成イメージが明確になることで、必要なデータ構造やロジックが自然と見えてくる
- Tailwind CSSとの相性が非常に良く、デザインをコードで直接書ける利点が大きい
- 仕様が明確な場合、後でモデルを追加しても大きな手戻りが少ない

### CSS GridとFlexboxの使い分け

- **Grid**：規則的な配列（キーボードのキー配置など）に最適
- **Flexbox**：柔軟なレイアウト（親指キーの中央寄せなど）に最適
- Grid内の要素に`margin`を付けてもセル位置は変わらない
- 複雑な配置を実現する場合は、GridとFlexを適切に組み合わせる必要がある

### 試行錯誤の重要性

- 親指キーの配置調整を試みたが、複雑化したためシンプルな形に戻した
- 最初から完璧を目指すよりも、まず動くものを作ってから改善する方が効率的
- 試行錯誤の過程でCSS GridとFlexboxの理解が深まった

## 技術的な課題・解決方法

### 課題：親指キーの中央寄せ配置

- **問題**：実際のCornixでは親指キーが中央寄りに配置されているが、CSS Gridで再現が複雑
- **試行**：GridとFlexboxを組み合わせて中央寄せを試みる
- **結果**：複雑化したため、シンプルな4×6のGrid配置に統一
- **今後の対応**：カラムスタッガードと合わせて、SVG化も視野に入れて検討

## 明日の予定

- Day 4の続き：タイピング練習画面のView完成
  - ホーム画面からのリンク追加
  - 細かいUI調整
- 可能であればDay 7-8の内容に着手
  - 単語データ用のYAMLファイル作成
  - Stimulusコントローラの基本実装

## 所感

Day 4として、Viewファーストな開発アプローチを本格的に導入した。CLAUDE.mdに方針を明文化し、Phase 2のスケジュールも調整した。

タイピング練習画面のView作成では、ブラウザで実際の画面を見ながら開発できたため、非常にモチベーションが高かった。Tailwind CSSとSlimの組み合わせで、デザインをコードで直接書けるのが快適だった。

Cornixキーボードの配列表示では、4行×6列の左右分割レイアウトを実装し、実際のCornix配列を反映できた。レイヤーキーの青色ハイライトも視覚的に分かりやすく仕上がった。

親指キーの中央寄せ配置を試みたが、CSS GridとFlexboxの組み合わせが複雑化したため、シンプルな4×6のGrid配置に統一した。試行錯誤の過程でCSS GridとFlexboxの理解が深まり、今後の実装に活かせそうだ。

Viewファーストな開発アプローチは期待以上に効果的で、完成形に近いUIを見ながら開発できるため、モチベーションが大幅に向上した。明日以降もこのアプローチを継続して、効率的に開発を進めたい。

コミット数: 2回（機能ブランチ）
ブランチ: `feature/typing-practice-view`
GitHub: https://github.com/sugiwe/flexitype
